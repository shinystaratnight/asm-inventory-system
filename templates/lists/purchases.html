{% extends 'layout/base.html' %}
{% load i18n %}

{% block title %} {% trans "Purchases" %} {% endblock title %}

{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

	<div class="content-wrapper trader-purchases-contract">

		<!-- Page header -->
		<div class="page-header">
			<div class="page-header-content">
				<div class="page-title">
					<h4>
						<i class="icon-arrow-left52 position-left"></i>
						<span class="text-semibold">{% trans "List" %}</span> - {% trans "Purchases (contract)" %}
					</h4>
				</div>
			</div>

			<div class="breadcrumb-line breadcrumb-line-component">
				<ul class="breadcrumb">
					<li><a><i class="icon-cart2 position-left"></i>{% trans "List" %}</a></li>
					<li class="active">{% trans "Purchases (contract)" %}</li>
				</ul>
			</div>
		</div>
		<!-- /page header -->

		<!-- Content area -->
		<div class="content">

			<div class="panel panel-flat">
				<div class="panel-heading border-bottom">
					<h2 class="panel-title">{% trans "Purchases (contract)" %}</h2>
				</div>

				<div class="panel-body" style="padding-top: 20px">
					<form action="" method="GET">
						<div class="row">
							<div class="col-md-4">
								<div class="form-group">
									<label>{% trans "Contract ID" %}:</label>
									<input type="text" class="form-control" placeholder="{% trans 'Contract ID' %}">
								</div>
							</div>

							<div class="col-md-4">
								<div class="form-group">
									<label>{% trans "Created date" %}:</label>
									<div class="input-group">
										<span class="input-group-addon"><i class="icon-calendar22"></i></span>
										<input type="text" class="form-control datepicker-milestone">
									</div>
								</div>
							</div>

							<div class="col-md-4">
								<div class="form-group">
									<label>{% trans "Customer" %}:</label>
									<input type="text" class="form-control" placeholder="{% trans 'Customer' %}">
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<label>{% trans "Product name" %}:</label>
									<input type="text" class="form-control" placeholder="{% trans 'Product name' %}">
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
									<label>{% trans "Inventory status" %}:</label>
									<select name="select" class="selectbox">
										<option value="" selected="selected">{% trans "All" %}</option>
										<option value="D">{% trans "Done" %}</option>
										<option value="P">{% trans "Pending" %}</option>
									</select>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-md-12">
								<div class="mb-3 text-right">
									<button type="button" class="btn btn-primary"><i class="icon-search4 position-left"></i>{% trans "Search" %}</button>
								</div>
							</div>
						</div>
					</form>
				</div>

				<div class="table-responsive">
					<p style="padding: 10px 20px; font-size: 16px;">{% trans "Search results" %}:</p>
					<table class="table table-bordered table-hover table-framed">
						<thead>
							<tr class="bg-blue">
								<th>{% trans "Contract ID" %}</th>
								<th>{% trans "Contract date" %}</th>
								<th>{% trans "Customer" %}</th>
								<th>{% trans "Delivered place" %}</th>
								<th>{% trans "Person in charge" %}</th>
								<th>{% trans "Payment day" %}</th>
								<th>{% trans "Product name" %}</th>
								<th>{% trans "Number of units" %}</th>
								<th>{% trans "Amount" %}</th>
								<th>{% trans "Inventory status" %}</th>
								<th>{% trans "Action" %}</th>
							</tr>
						</thead>

						<tbody>
							{% for product in products %}
							<tr>
								<td>{{ product.content_object.contract_id }}</td>
								<td>{{ product.content_object.created_at }}</td>
								<td>{{ product.content_object.customer.name }}</td>
								<td></td>
								<td>{{ product.content_object.person_in_charge }}</td>
								<td>{{ product.content_object.payment_due_date }}</td>
								<td>{{ product.product.name }}</td>
								<td>{{ product.quantity }}</td>
								<td>{{ product.price }}</td>
								<td>{{ product.get_status_display }}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>

				<div class="panel panel-body border-top-teal text-center">
					<ul class="pagination pagination-separated pagination-rounded" id="pagination">
					</ul>
				</div>

				<div class="row">
					<div class="col-md-12">
						<div class="my-5-s text-center">
							<form action="" method="post">
								{% csrf_token %}
								<button type="submit" class="btn btn-primary"><i class="icon-exit3 position-left"></i>{% trans "Export To CSV" %}</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /content area -->

		<script>
			$(function () {
				// Pagination customization
				if ($('#pagination').length) {
					var startPage = parseInt("{{ page_obj.number }}");
					$('#pagination').twbsPagination({
						totalPages: "{{ page_obj.paginator.num_pages }}",
						visiblePages: 5,
						startPage: startPage,
						hideOnlyOnePage:true,
						first:'&laquo;',
						prev:'&lsaquo;',
						next:'&rsaquo;',
						last:'&raquo;',
					}).on('page', function (event, page) {
						var url = location.href;
						var urlRegex = RegExp('page=\\d+', 'g');
						if (urlRegex.test(url)) {
							url = url.replace(urlRegex, `page=${page}`);
						} else {
							if (url.indexOf('?') == -1)
								url += `?page=${page}`;
							else
								url += `&page=${page}`;
						}
						location.href = url;
					});
				}
			});
		</script>

	</div>
{% endblock %}
